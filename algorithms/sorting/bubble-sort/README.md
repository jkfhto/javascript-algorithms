# 冒泡排序(BubbleSort)

* 基本思想：两个数比较大小，较大的数下沉，较小的数冒起来。
* 过程：
  * 比较相邻的两个数据，如果第二个数小，就交换位置。
  * 从前向后两两比较，一直到最后两个数据。最终最大的数被交换到终止的位置，这样最大的数字的位置就排好了。
  * 继续重复上述过程，依次将第2.3...n-1个最大数排好位置。
* 平均时间复杂度：O(n2)
* 优化：
* 针对问题：
  
  数据的顺序排好之后，冒泡算法仍然会继续进行下一轮的比较，直到arr.length-1次，后面的比较没有意义的。
* 方案：
  
  设置标志位flag，如果发生了交换flag设置为true；如果没有交换就设置为false。这样当一轮比较结束后如果flag仍为false，即：这一轮没有发生交换，说明数据的顺序已经排好，没有必要继续进行下去。
* 稳定性：冒泡排序是稳定的排序算法。在冒泡排序中，只有交换才可以改变两个元素的前后顺序。为了保证冒泡排序算法的稳定性，当有相邻的两个元素大小相等的时候，我们不做交换，相同大小的数据在排序前后不会改变顺序，所以冒泡排序是稳定的排序算法。
* 空间复杂度：冒泡排序是原地排序算法。冒泡的过程只涉及相邻数据的交换操作，只需要常量级的临时空间，所以它的空间复杂度为 O(1)，是一个原地排序算法。
* 时间复杂度：
  * 最好情况（满有序度）：O(n)。
  * 最坏情况（满逆序度）：O(n^2)。
  * 平均情况：通过有序度和逆序度来分析。
    * 什么是有序度？
      * 有序度是数组中具有有序关系的元素对的个数，比如[2,4,3,1,5,6]这组数据的有序度就是11，分别是[2,4][2,3][2,5][2,6][4,5][4,6][3,5][3,6][1,5][1,6][5,6]。同理，对于一个倒序数组，比如[6,5,4,3,2,1]，有序度是0；对于一个完全有序的数组，比如[1,2,3,4,5,6]，有序度为n*(n-1)/2，也就是15，完全有序的情况称为满有序度。
    * 什么是逆序度？
      * 逆序度的定义正好和有序度相反。核心公式：逆序度=满有序度-有序度。
    * 排序过程，就是有序度增加，逆序度减少的过程，最后达到满有序度，就说明排序完成了。
    * 冒泡排序包含两个操作原子，即比较和交换，每交换一次，有序度加1。不管算法如何改进，交换的次数总是确定的，即逆序度。
    * 对于包含n个数据的数组进行冒泡排序，平均交换次数是多少呢？最坏的情况初始有序度为0，所以要进行n*(n-1)/2交换。最好情况下，初始状态有序度是n*(n-1)/2，就不需要进行交互。我们可以取个中间值n*(n-1)/4，来表示初始有序度既不是很高也不是很低的平均情况。
    * 换句话说，平均情况下，需要n*(n-1)/4次交换操作，比较操作可定比交换操作多，而复杂度的上限是O(n^2)，所以平均情况时间复杂度就是O(n^2)。
    * 这个平均时间复杂度推导过程其实并不严格，但是很多时候很实用，毕竟概率论的定量分析太复杂，不太好用。


## 复杂度分析

| Name                  | 最好            | 平均             | 最坏               | 内存    | 稳定    | 备注  |
| --------------------- | :-------------: | :-----------------: | :-----------------: | :-------: | :-------: | :-------- |
| **Bubble sort**       | n               | n<sup>2</sup>       | n<sup>2</sup>       | 1         | Yes       |           |

## 动态效果示意图：

![BubbleSort](../../../resources/sorting/bubbleSort.gif)

## 参考

- [Wikipedia](https://en.wikipedia.org/wiki/Bubble_sort)
- [YouTube](https://www.youtube.com/watch?v=6Gv8vg0kcHc&index=27&t=0s&list=PLLXdhg_r2hKA7DPDsunoDZ-Z769jWn4R8)
- https://www.runoob.com/w3cnote/sort-algorithm-summary.html
- [数据结构与算法之美](https://time.geekbang.org/column/intro/126)